<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Contact Person Dashboard</title>
		<link rel="stylesheet" href="dashboard.css" />
	</head>
	<body>
		<header>
			<div class="logosec">
				<div class="logo">HealthCost InsightPro</div>
			</div>
			<div class="message">
				<div class="circle"></div>
				<img
					src="https://media.geeksforgeeks.org/wp-content/uploads/20221210183322/8.png"
					class="icn"
					alt="" />
			</div>
		</header>

		<div class="sidebar">
			<h2>Contact Person Dashboard</h2>
			<ul>
				<li>
					<svg
						xmlns="http://www.w3.org/2000/svg"
						width="24"
						height="24"
						viewBox="0 0 24 24"
						style="fill: white">
						<path
							d="m21.743 12.331-9-10c-.379-.422-1.107-.422-1.486 0l-9 10a.998.998 0 0 0-.17 1.076c.16.361.518.593.913.593h2v7a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-4h4v4a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-7h2a.998.998 0 0 0 .743-1.669z"></path>
					</svg>
					<a href="#">Home</a>
				</li>
				<li>
					<svg
						xmlns="http://www.w3.org/2000/svg"
						width="24"
						height="24"
						viewBox="0 0 24 24"
						style="fill: white">
						<path d="M2 7v1l11 4 9-4V7L11 4z"></path>
						<path
							d="M4 11v4.267c0 1.621 4.001 3.893 9 3.734 4-.126 6.586-1.972 7-3.467.024-.089.037-.178.037-.268V11L13 14l-5-1.667v3.213l-1-.364V12l-3-1z"></path>
					</svg>
					<a href="#" id="logout">Logout</a>
				</li>
			</ul>
		</div>

		<div class="main-content">
			<div id="userDataContainer"></div>
		</div>

		<script>
			document.addEventListener('DOMContentLoaded', async () => {
				const token = localStorage.getItem('token');
				if (!token) {
					window.location.href = './form.html';
				}
				const userDataContainer = document.getElementById('userDataContainer');
				const user = JSON.parse(localStorage.getItem('user'));
				const userDiv = document.createElement('div');
				userDiv.classList.add('user-info');
				userDiv.innerHTML = `
                    <p><strong>Name:</strong> ${user.name}</p>
                    <p><strong>Email:</strong> ${user.email}</p>
                    <p><strong>Insurance name:</strong> ${
											user.insurance_name
										}</p>
                    <p><strong>Location:</strong> ${user.location}</p>
                    <p><strong>Excel Files:</strong> ${user.excelFiles}</p>
                    ${
											user.Report_and_Recommendation
												? `<p><strong>Recommendations:</strong> ${user.Report_and_Recommendation}</p>`
												: `<p><em>No recommendations available at the moment</em></p>`
										}
                `;
				userDataContainer.append(userDiv);
			});

			const logoutBtn = document.getElementById('logout');
			logoutBtn.addEventListener('click', () => {
				localStorage.removeItem('token');
				window.location.href = './form.html';
			});
		</script>
	</body>
</html>
